# Ruff configuration for Intellicrack project

line-length = 140
target-version = "py310"

# Exclude directories from ruff checks
exclude = [
    # Test directories
    "tests/",
    "test/",
    "**/test_*.py",
    "**/tests/*.py",

    # Development directories
    "dev/",
    "development/",

    # Version control
    ".git/",
    ".gitignore",

    # Virtual environments
    ".venv/",
    ".venv_windows/",
    ".venv_wsl/",
    "venv/",
    "env/",
    ".pixi/",

    # Build and distribution
    "build/",
    "dist/",
    "*.egg-info/",
    "__pycache__/",
    "*.pyc",
    "*.pyo",

    # IDE and editor files
    ".vscode/",
    ".idea/",
    "*.swp",
    "*.swo",
    "*~",

    # Documentation
    "docs/",
    "documentation/",

    # Third-party tools
    "tools/",
    "ghidra/",

    # Cache directories
    ".ruff_cache/",
    ".mypy_cache/",
    ".pytest_cache/",

    # Jupyter notebooks
    "*.ipynb",

    # Configuration files
    "setup.py",
    "setup.cfg",
]

[lint]
select = [
    "E",   # pycodestyle errors
    "W",   # pycodestyle warnings
    "F",   # pyflakes
    "I",   # isort
    "C90", # mccabe
    "N",   # pep8-naming
    "B",   # flake8-bugbear
    "S",   # flake8-bandit security
]

ignore = [
    "E501",  # Line too long (handled by formatter)
    "B008",  # Do not perform function calls in argument defaults
    "S101",  # Use of assert detected (needed for tests)
    "S608",  # Possible SQL injection (false positives)
    "S104",  # Possible binding to all interfaces
    "N802",  # Function name should be lowercase
    "N803",  # Argument name should be lowercase
    "N806",  # Variable in function should be lowercase
]

# Per-file ignores
[lint.per-file-ignores]
"__init__.py" = ["F401", "F403"]  # Allow unused imports in __init__ files
"*/migrations/*" = ["E501"]        # Allow long lines in migrations
"conftest.py" = ["F401", "F403"]   # Allow imports in pytest config

[lint.mccabe]
max-complexity = 30

[lint.pep8-naming]
classmethod-decorators = ["classmethod", "pydantic.validator"]

[lint.flake8-bugbear]
extend-immutable-calls = ["fastapi.Depends", "fastapi.Query"]
