#!/usr/bin/env python3
"""Check for unmatched braces in f-string"""

with open('intellicrack/ui/dialogs/plugin_manager_dialog.py', 'r', encoding='utf-8') as f:
    lines = f.readlines()

# Find the f-string boundaries
f_string_start = 764
f_string_end = 1359

# Extract just the f-string content
f_string_lines = lines[f_string_start:f_string_end+1]
f_string_content = ''.join(f_string_lines)

# Count braces
open_count = f_string_content.count('{')
close_count = f_string_content.count('}')

print(f"Open braces: {open_count}")
print(f"Close braces: {close_count}")
print(f"Difference: {open_count - close_count}")

# Find potential issues
brace_stack = []
for line_num, line in enumerate(f_string_lines, start=f_string_start+1):
    for i, char in enumerate(line):
        if char == '{':
            brace_stack.append((line_num, i))
        elif char == '}':
            if not brace_stack:
                print(f"Unmatched closing brace at line {line_num}, position {i}")
                print(f"  Line content: {line.strip()}")
            else:
                brace_stack.pop()

if brace_stack:
    print("\nUnmatched opening braces:")
    for line_num, pos in brace_stack:
        print(f"  Line {line_num}, position {pos}")